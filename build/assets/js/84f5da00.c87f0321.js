"use strict";(globalThis.webpackChunkbook_docusaurus=globalThis.webpackChunkbook_docusaurus||[]).push([[8725],{3169(e,n,a){a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var t=a(8168),i=(a(6540),a(5680));const r={sidebar_position:1,title:"Chapter 2: The Robotic Nervous System (ROS 2)"},s="Chapter 2: The Robotic Nervous System (ROS 2)",o={unversionedId:"chapter-02/foundations-humanoid",id:"chapter-02/foundations-humanoid",title:"Chapter 2: The Robotic Nervous System (ROS 2)",description:"Learning Objectives",source:"@site/docs/chapter-02/01-foundations-humanoid.md",sourceDirName:"chapter-02",slug:"/chapter-02/foundations-humanoid",permalink:"/docs/chapter-02/foundations-humanoid",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/chapter-02/01-foundations-humanoid.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Chapter 2: The Robotic Nervous System (ROS 2)"},sidebar:"tutorialSidebar",previous:{title:"Chapter 2: Architecture - Foundations of Humanoid Robotics",permalink:"/docs/chapter-02/"},next:{title:"Chapter 2 Learning Outcomes",permalink:"/docs/chapter-02/learning-outcomes"}},l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"2.1 ROS 2 Architecture Overview",id:"21-ros-2-architecture-overview",level:2},{value:"DDS Integration",id:"dds-integration",level:3},{value:"Quality of Service (QoS) Policies",id:"quality-of-service-qos-policies",level:3},{value:"2.2 Nodes and Communication Primitives",id:"22-nodes-and-communication-primitives",level:2},{value:"Nodes",id:"nodes",level:3},{value:"Topics and Publishers/Subscribers",id:"topics-and-publisherssubscribers",level:3},{value:"Services and Clients",id:"services-and-clients",level:3},{value:"Actions",id:"actions",level:3},{value:"2.3 Package and Workspace Management",id:"23-package-and-workspace-management",level:2},{value:"Package Structure",id:"package-structure",level:3},{value:"Package.xml File",id:"packagexml-file",level:3},{value:"Colcon Build System",id:"colcon-build-system",level:3},{value:"2.4 Advanced ROS 2 Concepts",id:"24-advanced-ros-2-concepts",level:2},{value:"Time and Time Handling",id:"time-and-time-handling",level:3},{value:"TF (Transform) System",id:"tf-transform-system",level:3},{value:"Parameters and Configuration",id:"parameters-and-configuration",level:3},{value:"Lifecycle Nodes",id:"lifecycle-nodes",level:3},{value:"2.5 Security and Real-time Considerations",id:"25-security-and-real-time-considerations",level:2},{value:"Security Features",id:"security-features",level:3},{value:"Real-time Capabilities",id:"real-time-capabilities",level:3},{value:"2.6 Practical Example: Robot Navigation System",id:"26-practical-example-robot-navigation-system",level:2},{value:"2.7 Summary",id:"27-summary",level:2},{value:"2.8 Exercises",id:"28-exercises",level:2},{value:"Exercise 2.1: Node Communication",id:"exercise-21-node-communication",level:3},{value:"Exercise 2.2: Service Implementation",id:"exercise-22-service-implementation",level:3},{value:"Exercise 2.3: QoS Policy Experimentation",id:"exercise-23-qos-policy-experimentation",level:3},{value:"Exercise 2.4: Robot Control Node",id:"exercise-24-robot-control-node",level:3},{value:"Exercise 2.5: Launch File Creation",id:"exercise-25-launch-file-creation",level:3}],m={toc:c};function p({components:e,...n}){return(0,i.yg)("wrapper",(0,t.A)({},m,n,{components:e,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"chapter-2-the-robotic-nervous-system-ros-2"},"Chapter 2: The Robotic Nervous System (ROS 2)"),(0,i.yg)("h2",{id:"learning-objectives"},"Learning Objectives"),(0,i.yg)("p",null,"By the end of this chapter, you should be able to:"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Remember"),": List the core components of ROS 2 architecture"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Understand"),": Explain how nodes, topics, services, and actions enable robot communication"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Apply"),": Create ROS 2 nodes that communicate via topics and services"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Analyze"),": Evaluate the advantages of ROS 2's DDS-based communication over ROS 1"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Evaluate"),": Compare ROS 2 with other robotic middleware frameworks"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Create"),": Design a distributed robotics system using ROS 2 communication patterns"),(0,i.yg)("h2",{id:"21-ros-2-architecture-overview"},"2.1 ROS 2 Architecture Overview"),(0,i.yg)("p",null,"ROS 2 (Robot Operating System 2) serves as the communication backbone for modern robotics applications, providing a framework for distributed systems to interact seamlessly. Unlike its predecessor, ROS 2 is built from the ground up to address the challenges of production robotics, including real-time performance, safety, and security requirements."),(0,i.yg)("p",null,"The architecture of ROS 2 is fundamentally different from ROS 1 due to its integration with DDS (Data Distribution Service), a middleware standard for real-time systems. This integration provides several advantages:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Real-time capabilities"),": Deterministic message delivery with quality of service (QoS) policies"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Platform independence"),": Communication across different operating systems and hardware architectures"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Fault tolerance"),": Built-in mechanisms for handling network partitions and component failures"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Security"),": Authentication, encryption, and access control for safety-critical applications")),(0,i.yg)("h3",{id:"dds-integration"},"DDS Integration"),(0,i.yg)("p",null,"DDS (Data Distribution Service) is an OMG (Object Management Group) standard for real-time, high-performance data connectivity. In ROS 2, DDS acts as the communication layer that abstracts the complexity of network programming while providing powerful features for distributed systems."),(0,i.yg)("p",null,"The key components of the ROS 2 architecture include:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Nodes"),": Execution units that perform computation"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"DDS Implementation"),": Underlying communication middleware (e.g., Fast DDS, Cyclone DDS, RTI Connext)"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Client Libraries"),": Language-specific interfaces (rclcpp for C++, rclpy for Python)"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"ROS Abstractions"),": Topics, services, actions, parameters, and other ROS-specific concepts")),(0,i.yg)("h3",{id:"quality-of-service-qos-policies"},"Quality of Service (QoS) Policies"),(0,i.yg)("p",null,"One of the key innovations in ROS 2 is the Quality of Service (QoS) system, which allows fine-tuning of communication behavior to match application requirements. QoS policies include:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Reliability"),": Best effort vs. reliable delivery"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Durability"),": Volatile vs. transient local data persistence"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"History"),": Keep all vs. keep last N messages"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Liveliness"),": Deadline-based vs. manual vs. automatic liveliness checks"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Deadline"),": Maximum time between consecutive message deliveries"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Depth"),": Size of the message queue")),(0,i.yg)("h2",{id:"22-nodes-and-communication-primitives"},"2.2 Nodes and Communication Primitives"),(0,i.yg)("h3",{id:"nodes"},"Nodes"),(0,i.yg)("p",null,"In ROS 2, a node is the fundamental unit of computation. Each node typically performs a specific function within the robot's overall behavior. Nodes encapsulate:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Parameters"),": Configurable values that can be changed at runtime"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Publishers"),": Interfaces for sending messages to topics"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Subscribers"),": Interfaces for receiving messages from topics"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Services"),": Server and client interfaces for request-response communication"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Actions"),": Interfaces for long-running tasks with feedback")),(0,i.yg)("h3",{id:"topics-and-publisherssubscribers"},"Topics and Publishers/Subscribers"),(0,i.yg)("p",null,"Topics form the backbone of ROS 2's publish-subscribe communication model. Publishers send messages to topics, while subscribers receive messages from topics. This pattern promotes loose coupling between components and enables flexible system architecture."),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Example: Creating a publisher and subscriber in C++")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-cpp"},'// Publisher example\n#include "rclcpp/rclcpp.hpp"\n#include "std_msgs/msg/string.hpp"\n\nclass MinimalPublisher : public rclcpp::Node\n{\npublic:\n    MinimalPublisher()\n    : Node("minimal_publisher"), count_(0)\n    {\n        publisher_ = this->create_publisher<std_msgs::msg::String>("topic", 10);\n        timer_ = this->create_wall_timer(\n            500ms, std::bind(&MinimalPublisher::timer_callback, this));\n    }\n\nprivate:\n    void timer_callback()\n    {\n        auto message = std_msgs::msg::String();\n        message.data = "Hello, world! " + std::to_string(count_++);\n        RCLCPP_INFO(this->get_logger(), "Publishing: \'%s\'", message.data.c_str());\n        publisher_->publish(message);\n    }\n    rclcpp::TimerBase::SharedPtr timer_;\n    rclcpp::Publisher<std_msgs::msg::String>::SharedPtr publisher_;\n    size_t count_;\n};\n\nint main(int argc, char * argv[])\n{\n    rclcpp::init(argc, argv);\n    rclcpp::spin(std::make_shared<MinimalPublisher>());\n    rclcpp::shutdown();\n    return 0;\n}\n')),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Example: Creating a subscriber in Python")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-python"},"import rclcpp\nfrom rclcpp.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\ndef main(args=None):\n    rclcpp.init(args=args)\n    minimal_subscriber = MinimalSubscriber()\n    rclcpp.spin(minimal_subscriber)\n    minimal_subscriber.destroy_node()\n    rclcpp.shutdown()\n\nif __name__ == '__main__':\n    main()\n")),(0,i.yg)("h3",{id:"services-and-clients"},"Services and Clients"),(0,i.yg)("p",null,"Services provide request-response communication, ideal for operations that require immediate responses or completion confirmation. They are synchronous and follow a client-server pattern."),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Example: Creating a service server in Python")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-python"},"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass MinimalService(Node):\n\n    def __init__(self):\n        super().__init__('minimal_service')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n        return response\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_service = MinimalService()\n    rclpy.spin(minimal_service)\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n")),(0,i.yg)("h3",{id:"actions"},"Actions"),(0,i.yg)("p",null,"Actions are designed for long-running tasks that require feedback and the ability to cancel. They extend the service pattern with continuous feedback and goal management."),(0,i.yg)("h2",{id:"23-package-and-workspace-management"},"2.3 Package and Workspace Management"),(0,i.yg)("h3",{id:"package-structure"},"Package Structure"),(0,i.yg)("p",null,"A ROS 2 package follows a standardized structure that enables consistent development and deployment:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt          # Build instructions for C++ packages\n\u251c\u2500\u2500 package.xml             # Package metadata and dependencies\n\u251c\u2500\u2500 src/                    # Source code files\n\u251c\u2500\u2500 include/my_robot_package/   # Header files\n\u251c\u2500\u2500 launch/                 # Launch files for starting multiple nodes\n\u251c\u2500\u2500 config/                 # Configuration files\n\u251c\u2500\u2500 test/                   # Test files\n\u2514\u2500\u2500 scripts/                # Python scripts\n")),(0,i.yg)("h3",{id:"packagexml-file"},"Package.xml File"),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"package.xml")," file contains metadata about the package, including dependencies:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_robot_package</name>\n  <version>0.0.0</version>\n  <description>Package for my robot functionality</description>\n  <maintainer email="user@todo.todo">user</maintainer>\n  <license>Apache License 2.0</license>\n\n  <buildtool_depend>ament_cmake</buildtool_depend>\n\n  <depend>rclcpp</depend>\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>sensor_msgs</depend>\n\n  <test_depend>ament_lint_auto</test_depend>\n  <test_depend>ament_lint_common</test_depend>\n\n  <export>\n    <build_type>ament_cmake</build_type>\n  </export>\n</package>\n')),(0,i.yg)("h3",{id:"colcon-build-system"},"Colcon Build System"),(0,i.yg)("p",null,"Colcon is the build tool used in ROS 2, replacing the catkin tool from ROS 1. It provides:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Parallel building"),": Faster compilation by building packages concurrently"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Multi-platform support"),": Works across different operating systems"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Flexible building"),": Supports various build systems (CMake, ament_cmake, ament_python)")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Basic Colcon Commands:")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-bash"},"# Build all packages in the workspace\ncolcon build\n\n# Build specific packages\ncolcon build --packages-select my_robot_package\n\n# Build with additional CMake arguments\ncolcon build --cmake-args -DCMAKE_BUILD_TYPE=Release\n\n# Build and run tests\ncolcon build --event-handlers console_direct+\n")),(0,i.yg)("h2",{id:"24-advanced-ros-2-concepts"},"2.4 Advanced ROS 2 Concepts"),(0,i.yg)("h3",{id:"time-and-time-handling"},"Time and Time Handling"),(0,i.yg)("p",null,"ROS 2 provides sophisticated time handling capabilities, especially important for robotics applications where different time sources may be relevant:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"System time"),": Real-world wall clock time"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Simulation time"),": Time provided by simulation environments"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Steady time"),": Monotonic time for performance measurements")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-python"},"# Example of time handling in ROS 2\nfrom rclpy.time import Time\nfrom rclpy.duration import Duration\n\n# Getting current ROS time\ncurrent_time = self.get_clock().now()\n\n# Creating durations\nduration = Duration(seconds=1.5)\n\n# Time arithmetic\nlater_time = current_time + duration\n")),(0,i.yg)("h3",{id:"tf-transform-system"},"TF (Transform) System"),(0,i.yg)("p",null,"The TF (Transform) system is crucial for managing coordinate frames and transformations in robotics. ROS 2's TF2 provides:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Efficient transformation lookups"),": Fast access to coordinate transformations"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Buffer management"),": Handles time-varying transformations"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Multi-threading support"),": Safe for concurrent access"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Message filtering"),": Interpolation and extrapolation of transforms")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-python"},"# Example TF usage in ROS 2\nimport tf2_ros\nfrom geometry_msgs.msg import TransformStamped\n\n# Creating a transform broadcaster\ntf_broadcaster = tf2_ros.TransformBroadcaster(self)\n\n# Publishing a transform\nt = TransformStamped()\nt.header.stamp = self.get_clock().now().to_msg()\nt.header.frame_id = 'odom'\nt.child_frame_id = 'base_link'\nt.transform.translation.x = 0.0\nt.transform.translation.y = 0.0\nt.transform.translation.z = 0.0\nt.transform.rotation.x = 0.0\nt.transform.rotation.y = 0.0\nt.transform.rotation.z = 0.0\nt.transform.rotation.w = 1.0\n\ntf_broadcaster.sendTransform(t)\n")),(0,i.yg)("h3",{id:"parameters-and-configuration"},"Parameters and Configuration"),(0,i.yg)("p",null,"ROS 2 provides a unified parameter system that allows runtime configuration:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-python"},"# Declaring and using parameters in a node\nself.declare_parameter('wheel_radius', 0.05)\nwheel_radius = self.get_parameter('wheel_radius').value\n")),(0,i.yg)("h3",{id:"lifecycle-nodes"},"Lifecycle Nodes"),(0,i.yg)("p",null,"For complex systems requiring state management and initialization sequences, ROS 2 provides lifecycle nodes:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-python"},"from lifecycle_py import LifecycleNode\nfrom lifecycle_msgs.msg import State\n\nclass LifecycleTalker(LifecycleNode):\n\n    def __init__(self):\n        super().__init__('lifecycle_talker')\n        # Initialize components in unconfigured state\n")),(0,i.yg)("h2",{id:"25-security-and-real-time-considerations"},"2.5 Security and Real-time Considerations"),(0,i.yg)("h3",{id:"security-features"},"Security Features"),(0,i.yg)("p",null,"ROS 2 includes security features that were lacking in ROS 1:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Authentication"),": Verifying the identity of nodes"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Encryption"),": Protecting message contents"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Access control"),": Controlling what nodes can communicate")),(0,i.yg)("h3",{id:"real-time-capabilities"},"Real-time Capabilities"),(0,i.yg)("p",null,"ROS 2 is designed with real-time systems in mind:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Real-time scheduling"),": Support for SCHED_FIFO and SCHED_RR policies"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Memory management"),": Techniques to avoid memory allocation during real-time execution"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Message prioritization"),": QoS policies for prioritizing critical messages")),(0,i.yg)("h2",{id:"26-practical-example-robot-navigation-system"},"2.6 Practical Example: Robot Navigation System"),(0,i.yg)("p",null,"Let's put together a practical example that demonstrates multiple ROS 2 concepts: a simple navigation system that includes:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Sensor data (LIDAR) processing"),(0,i.yg)("li",{parentName:"ul"},"Map representation"),(0,i.yg)("li",{parentName:"ul"},"Path planning"),(0,i.yg)("li",{parentName:"ul"},"Robot control")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-python"},"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import LaserScan\nfrom geometry_msgs.msg import Twist\nfrom nav_msgs.msg import OccupancyGrid\nimport numpy as np\n\nclass NavigationSystem(Node):\n\n    def __init__(self):\n        super().__init__('navigation_system')\n        \n        # Create subscribers\n        self.scan_sub = self.create_subscription(\n            LaserScan,\n            'scan',\n            self.scan_callback,\n            10)\n            \n        # Create publisher for velocity commands\n        self.cmd_vel_pub = self.create_publisher(\n            Twist, \n            'cmd_vel', \n            10)\n            \n        # Create timer for navigation logic\n        self.nav_timer = self.create_timer(0.1, self.navigation_callback)\n        \n        # Robot state\n        self.laser_data = None\n        self.obstacle_detected = False\n        \n        # Navigation parameters\n        self.declare_parameter('safety_distance', 0.5)\n        self.safety_distance = self.get_parameter('safety_distance').value\n\n    def scan_callback(self, msg):\n        \"\"\"Process LIDAR data to detect obstacles\"\"\"\n        # Convert to numpy array for processing\n        ranges = np.array(msg.ranges)\n        \n        # Remove invalid readings\n        valid_ranges = ranges[np.isfinite(ranges)]\n        \n        # Check for obstacles within safety distance\n        self.obstacle_detected = np.any(valid_ranges < self.safety_distance)\n        self.laser_data = valid_ranges\n\n    def navigation_callback(self):\n        \"\"\"Main navigation logic\"\"\"\n        msg = Twist()\n        \n        if self.laser_data is not None:\n            if self.obstacle_detected:\n                # Stop robot if obstacle detected\n                msg.linear.x = 0.0\n                msg.angular.z = 0.0\n                self.get_logger().info('Obstacle detected! Stopping robot.')\n            else:\n                # Move forward if no obstacles\n                msg.linear.x = 0.5  # Forward speed\n                msg.angular.z = 0.0  # No rotation\n        else:\n            # Stop if no sensor data\n            msg.linear.x = 0.0\n            msg.angular.z = 0.0\n            \n        self.cmd_vel_pub.publish(msg)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    nav_system = NavigationSystem()\n    \n    try:\n        rclpy.spin(nav_system)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        nav_system.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n")),(0,i.yg)("h2",{id:"27-summary"},"2.7 Summary"),(0,i.yg)("p",null,"This chapter has provided a comprehensive overview of ROS 2, the foundational communication framework for modern robotics. Key takeaways include:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"ROS 2's architecture is built on DDS, providing real-time capabilities and improved robustness"),(0,i.yg)("li",{parentName:"ul"},"The publish-subscribe model with topics, request-response with services, and goal-oriented communication with actions enable flexible system design"),(0,i.yg)("li",{parentName:"ul"},"The package system with colcon provides consistent development and deployment workflows"),(0,i.yg)("li",{parentName:"ul"},"Advanced features like TF, time handling, and lifecycle management support complex robotics applications"),(0,i.yg)("li",{parentName:"ul"},"Security and real-time considerations make ROS 2 suitable for production environments")),(0,i.yg)("p",null,"Understanding ROS 2 is crucial for Physical AI systems as it provides the communication infrastructure that enables different components to interact effectively. In subsequent chapters, we'll see how ROS 2 integrates with simulation environments, AI systems, and control frameworks."),(0,i.yg)("h2",{id:"28-exercises"},"2.8 Exercises"),(0,i.yg)("h3",{id:"exercise-21-node-communication"},"Exercise 2.1: Node Communication"),(0,i.yg)("p",null,"Create two ROS 2 nodes: one that publishes sensor data (simulated) and another that subscribes to this data and logs the values. Implement appropriate error handling and logging."),(0,i.yg)("h3",{id:"exercise-22-service-implementation"},"Exercise 2.2: Service Implementation"),(0,i.yg)("p",null,"Implement a ROS 2 service that calculates the distance between two points in 2D space. Create both the service server and a client node that makes requests to the service."),(0,i.yg)("h3",{id:"exercise-23-qos-policy-experimentation"},"Exercise 2.3: QoS Policy Experimentation"),(0,i.yg)("p",null,"Modify the publisher-subscriber example to experiment with different QoS policies. Compare the effects of reliable vs. best-effort delivery and different history policies."),(0,i.yg)("h3",{id:"exercise-24-robot-control-node"},"Exercise 2.4: Robot Control Node"),(0,i.yg)("p",null,"Create a ROS 2 node that subscribes to a LIDAR topic and publishes velocity commands to avoid obstacles. Implement the control logic using a simple proportional controller."),(0,i.yg)("h3",{id:"exercise-25-launch-file-creation"},"Exercise 2.5: Launch File Creation"),(0,i.yg)("p",null,"Create a launch file that starts multiple nodes simultaneously: a sensor simulator, a processing node, and a visualization node. Use parameters to configure each node."))}p.isMDXComponent=!0},5680(e,n,a){a.d(n,{xA:()=>m,yg:()=>d});var t=a(6540);function i(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,t)}return a}function s(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach(function(n){i(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function o(e,n){if(null==e)return{};var a,t,i=function(e,n){if(null==e)return{};var a,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=t.createContext({}),c=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):s(s({},n),e)),a},m=function(e){var n=c(e.components);return t.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef(function(e,n){var a=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=c(a),d=i,g=u["".concat(l,".").concat(d)]||u[d]||p[d]||r;return a?t.createElement(g,s(s({ref:n},m),{},{components:a})):t.createElement(g,s({ref:n},m))});function d(e,n){var a=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=a.length,s=new Array(r);s[0]=u;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o.mdxType="string"==typeof e?e:i,s[1]=o;for(var c=2;c<r;c++)s[c]=a[c];return t.createElement.apply(null,s)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);