"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[8725],{741:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var s=i(4848),r=i(8453);const t={sidebar_position:1,title:"Chapter 2: The Robotic Nervous System (ROS 2)"},a="Chapter 2: The Robotic Nervous System (ROS 2)",o={id:"chapter-02/foundations-humanoid",title:"Chapter 2: The Robotic Nervous System (ROS 2)",description:"Learning Objectives",source:"@site/docs/chapter-02/01-foundations-humanoid.md",sourceDirName:"chapter-02",slug:"/chapter-02/foundations-humanoid",permalink:"/docs/chapter-02/foundations-humanoid",draft:!1,unlisted:!1,editUrl:"https://github.com/tabindaseher/Physical-AI-Humanoid-Robotics/edit/main/docs/chapter-02/01-foundations-humanoid.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Chapter 2: The Robotic Nervous System (ROS 2)"},sidebar:"tutorialSidebar",previous:{title:"Chapter 1 Exercises",permalink:"/docs/chapter-01/exercises"},next:{title:"Chapter 2 Learning Outcomes",permalink:"/docs/chapter-02/learning-outcomes"}},l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"2.1 ROS 2 Architecture Overview",id:"21-ros-2-architecture-overview",level:2},{value:"DDS Integration",id:"dds-integration",level:3},{value:"Quality of Service (QoS) Policies",id:"quality-of-service-qos-policies",level:3},{value:"2.2 Nodes and Communication Primitives",id:"22-nodes-and-communication-primitives",level:2},{value:"Nodes",id:"nodes",level:3},{value:"Topics and Publishers/Subscribers",id:"topics-and-publisherssubscribers",level:3},{value:"Services and Clients",id:"services-and-clients",level:3},{value:"Actions",id:"actions",level:3},{value:"2.3 Package and Workspace Management",id:"23-package-and-workspace-management",level:2},{value:"Package Structure",id:"package-structure",level:3},{value:"Package.xml File",id:"packagexml-file",level:3},{value:"Colcon Build System",id:"colcon-build-system",level:3},{value:"2.4 Advanced ROS 2 Concepts",id:"24-advanced-ros-2-concepts",level:2},{value:"Time and Time Handling",id:"time-and-time-handling",level:3},{value:"TF (Transform) System",id:"tf-transform-system",level:3},{value:"Parameters and Configuration",id:"parameters-and-configuration",level:3},{value:"Lifecycle Nodes",id:"lifecycle-nodes",level:3},{value:"2.5 Security and Real-time Considerations",id:"25-security-and-real-time-considerations",level:2},{value:"Security Features",id:"security-features",level:3},{value:"Real-time Capabilities",id:"real-time-capabilities",level:3},{value:"2.6 Practical Example: Robot Navigation System",id:"26-practical-example-robot-navigation-system",level:2},{value:"2.7 Summary",id:"27-summary",level:2},{value:"2.8 Exercises",id:"28-exercises",level:2},{value:"Exercise 2.1: Node Communication",id:"exercise-21-node-communication",level:3},{value:"Exercise 2.2: Service Implementation",id:"exercise-22-service-implementation",level:3},{value:"Exercise 2.3: QoS Policy Experimentation",id:"exercise-23-qos-policy-experimentation",level:3},{value:"Exercise 2.4: Robot Control Node",id:"exercise-24-robot-control-node",level:3},{value:"Exercise 2.5: Launch File Creation",id:"exercise-25-launch-file-creation",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"chapter-2-the-robotic-nervous-system-ros-2",children:"Chapter 2: The Robotic Nervous System (ROS 2)"}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this chapter, you should be able to:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Remember"}),": List the core components of ROS 2 architecture"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Understand"}),": Explain how nodes, topics, services, and actions enable robot communication"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Apply"}),": Create ROS 2 nodes that communicate via topics and services"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Analyze"}),": Evaluate the advantages of ROS 2's DDS-based communication over ROS 1"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Evaluate"}),": Compare ROS 2 with other robotic middleware frameworks"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Create"}),": Design a distributed robotics system using ROS 2 communication patterns"]}),"\n",(0,s.jsx)(n.h2,{id:"21-ros-2-architecture-overview",children:"2.1 ROS 2 Architecture Overview"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 (Robot Operating System 2) serves as the communication backbone for modern robotics applications, providing a framework for distributed systems to interact seamlessly. Unlike its predecessor, ROS 2 is built from the ground up to address the challenges of production robotics, including real-time performance, safety, and security requirements."}),"\n",(0,s.jsx)(n.p,{children:"The architecture of ROS 2 is fundamentally different from ROS 1 due to its integration with DDS (Data Distribution Service), a middleware standard for real-time systems. This integration provides several advantages:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time capabilities"}),": Deterministic message delivery with quality of service (QoS) policies"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Platform independence"}),": Communication across different operating systems and hardware architectures"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fault tolerance"}),": Built-in mechanisms for handling network partitions and component failures"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Security"}),": Authentication, encryption, and access control for safety-critical applications"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"dds-integration",children:"DDS Integration"}),"\n",(0,s.jsx)(n.p,{children:"DDS (Data Distribution Service) is an OMG (Object Management Group) standard for real-time, high-performance data connectivity. In ROS 2, DDS acts as the communication layer that abstracts the complexity of network programming while providing powerful features for distributed systems."}),"\n",(0,s.jsx)(n.p,{children:"The key components of the ROS 2 architecture include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Nodes"}),": Execution units that perform computation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DDS Implementation"}),": Underlying communication middleware (e.g., Fast DDS, Cyclone DDS, RTI Connext)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Client Libraries"}),": Language-specific interfaces (rclcpp for C++, rclpy for Python)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ROS Abstractions"}),": Topics, services, actions, parameters, and other ROS-specific concepts"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"quality-of-service-qos-policies",children:"Quality of Service (QoS) Policies"}),"\n",(0,s.jsx)(n.p,{children:"One of the key innovations in ROS 2 is the Quality of Service (QoS) system, which allows fine-tuning of communication behavior to match application requirements. QoS policies include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reliability"}),": Best effort vs. reliable delivery"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Durability"}),": Volatile vs. transient local data persistence"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"History"}),": Keep all vs. keep last N messages"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Liveliness"}),": Deadline-based vs. manual vs. automatic liveliness checks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Deadline"}),": Maximum time between consecutive message deliveries"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Depth"}),": Size of the message queue"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"22-nodes-and-communication-primitives",children:"2.2 Nodes and Communication Primitives"}),"\n",(0,s.jsx)(n.h3,{id:"nodes",children:"Nodes"}),"\n",(0,s.jsx)(n.p,{children:"In ROS 2, a node is the fundamental unit of computation. Each node typically performs a specific function within the robot's overall behavior. Nodes encapsulate:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parameters"}),": Configurable values that can be changed at runtime"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Publishers"}),": Interfaces for sending messages to topics"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Subscribers"}),": Interfaces for receiving messages from topics"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Services"}),": Server and client interfaces for request-response communication"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Actions"}),": Interfaces for long-running tasks with feedback"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"topics-and-publisherssubscribers",children:"Topics and Publishers/Subscribers"}),"\n",(0,s.jsx)(n.p,{children:"Topics form the backbone of ROS 2's publish-subscribe communication model. Publishers send messages to topics, while subscribers receive messages from topics. This pattern promotes loose coupling between components and enables flexible system architecture."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example: Creating a publisher and subscriber in C++"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'// Publisher example\n#include "rclcpp/rclcpp.hpp"\n#include "std_msgs/msg/string.hpp"\n\nclass MinimalPublisher : public rclcpp::Node\n{\npublic:\n    MinimalPublisher()\n    : Node("minimal_publisher"), count_(0)\n    {\n        publisher_ = this->create_publisher<std_msgs::msg::String>("topic", 10);\n        timer_ = this->create_wall_timer(\n            500ms, std::bind(&MinimalPublisher::timer_callback, this));\n    }\n\nprivate:\n    void timer_callback()\n    {\n        auto message = std_msgs::msg::String();\n        message.data = "Hello, world! " + std::to_string(count_++);\n        RCLCPP_INFO(this->get_logger(), "Publishing: \'%s\'", message.data.c_str());\n        publisher_->publish(message);\n    }\n    rclcpp::TimerBase::SharedPtr timer_;\n    rclcpp::Publisher<std_msgs::msg::String>::SharedPtr publisher_;\n    size_t count_;\n};\n\nint main(int argc, char * argv[])\n{\n    rclcpp::init(argc, argv);\n    rclcpp::spin(std::make_shared<MinimalPublisher>());\n    rclcpp::shutdown();\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example: Creating a subscriber in Python"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclcpp\nfrom rclcpp.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\ndef main(args=None):\n    rclcpp.init(args=args)\n    minimal_subscriber = MinimalSubscriber()\n    rclcpp.spin(minimal_subscriber)\n    minimal_subscriber.destroy_node()\n    rclcpp.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"services-and-clients",children:"Services and Clients"}),"\n",(0,s.jsx)(n.p,{children:"Services provide request-response communication, ideal for operations that require immediate responses or completion confirmation. They are synchronous and follow a client-server pattern."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example: Creating a service server in Python"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass MinimalService(Node):\n\n    def __init__(self):\n        super().__init__('minimal_service')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n        return response\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_service = MinimalService()\n    rclpy.spin(minimal_service)\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"actions",children:"Actions"}),"\n",(0,s.jsx)(n.p,{children:"Actions are designed for long-running tasks that require feedback and the ability to cancel. They extend the service pattern with continuous feedback and goal management."}),"\n",(0,s.jsx)(n.h2,{id:"23-package-and-workspace-management",children:"2.3 Package and Workspace Management"}),"\n",(0,s.jsx)(n.h3,{id:"package-structure",children:"Package Structure"}),"\n",(0,s.jsx)(n.p,{children:"A ROS 2 package follows a standardized structure that enables consistent development and deployment:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt          # Build instructions for C++ packages\n\u251c\u2500\u2500 package.xml             # Package metadata and dependencies\n\u251c\u2500\u2500 src/                    # Source code files\n\u251c\u2500\u2500 include/my_robot_package/   # Header files\n\u251c\u2500\u2500 launch/                 # Launch files for starting multiple nodes\n\u251c\u2500\u2500 config/                 # Configuration files\n\u251c\u2500\u2500 test/                   # Test files\n\u2514\u2500\u2500 scripts/                # Python scripts\n"})}),"\n",(0,s.jsx)(n.h3,{id:"packagexml-file",children:"Package.xml File"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"package.xml"})," file contains metadata about the package, including dependencies:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_robot_package</name>\n  <version>0.0.0</version>\n  <description>Package for my robot functionality</description>\n  <maintainer email="user@todo.todo">user</maintainer>\n  <license>Apache License 2.0</license>\n\n  <buildtool_depend>ament_cmake</buildtool_depend>\n\n  <depend>rclcpp</depend>\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>sensor_msgs</depend>\n\n  <test_depend>ament_lint_auto</test_depend>\n  <test_depend>ament_lint_common</test_depend>\n\n  <export>\n    <build_type>ament_cmake</build_type>\n  </export>\n</package>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"colcon-build-system",children:"Colcon Build System"}),"\n",(0,s.jsx)(n.p,{children:"Colcon is the build tool used in ROS 2, replacing the catkin tool from ROS 1. It provides:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parallel building"}),": Faster compilation by building packages concurrently"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multi-platform support"}),": Works across different operating systems"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Flexible building"}),": Supports various build systems (CMake, ament_cmake, ament_python)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Basic Colcon Commands:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Build all packages in the workspace\ncolcon build\n\n# Build specific packages\ncolcon build --packages-select my_robot_package\n\n# Build with additional CMake arguments\ncolcon build --cmake-args -DCMAKE_BUILD_TYPE=Release\n\n# Build and run tests\ncolcon build --event-handlers console_direct+\n"})}),"\n",(0,s.jsx)(n.h2,{id:"24-advanced-ros-2-concepts",children:"2.4 Advanced ROS 2 Concepts"}),"\n",(0,s.jsx)(n.h3,{id:"time-and-time-handling",children:"Time and Time Handling"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 provides sophisticated time handling capabilities, especially important for robotics applications where different time sources may be relevant:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"System time"}),": Real-world wall clock time"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Simulation time"}),": Time provided by simulation environments"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Steady time"}),": Monotonic time for performance measurements"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Example of time handling in ROS 2\nfrom rclpy.time import Time\nfrom rclpy.duration import Duration\n\n# Getting current ROS time\ncurrent_time = self.get_clock().now()\n\n# Creating durations\nduration = Duration(seconds=1.5)\n\n# Time arithmetic\nlater_time = current_time + duration\n"})}),"\n",(0,s.jsx)(n.h3,{id:"tf-transform-system",children:"TF (Transform) System"}),"\n",(0,s.jsx)(n.p,{children:"The TF (Transform) system is crucial for managing coordinate frames and transformations in robotics. ROS 2's TF2 provides:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Efficient transformation lookups"}),": Fast access to coordinate transformations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Buffer management"}),": Handles time-varying transformations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multi-threading support"}),": Safe for concurrent access"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Message filtering"}),": Interpolation and extrapolation of transforms"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Example TF usage in ROS 2\nimport tf2_ros\nfrom geometry_msgs.msg import TransformStamped\n\n# Creating a transform broadcaster\ntf_broadcaster = tf2_ros.TransformBroadcaster(self)\n\n# Publishing a transform\nt = TransformStamped()\nt.header.stamp = self.get_clock().now().to_msg()\nt.header.frame_id = 'odom'\nt.child_frame_id = 'base_link'\nt.transform.translation.x = 0.0\nt.transform.translation.y = 0.0\nt.transform.translation.z = 0.0\nt.transform.rotation.x = 0.0\nt.transform.rotation.y = 0.0\nt.transform.rotation.z = 0.0\nt.transform.rotation.w = 1.0\n\ntf_broadcaster.sendTransform(t)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parameters-and-configuration",children:"Parameters and Configuration"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 provides a unified parameter system that allows runtime configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Declaring and using parameters in a node\nself.declare_parameter('wheel_radius', 0.05)\nwheel_radius = self.get_parameter('wheel_radius').value\n"})}),"\n",(0,s.jsx)(n.h3,{id:"lifecycle-nodes",children:"Lifecycle Nodes"}),"\n",(0,s.jsx)(n.p,{children:"For complex systems requiring state management and initialization sequences, ROS 2 provides lifecycle nodes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from lifecycle_py import LifecycleNode\nfrom lifecycle_msgs.msg import State\n\nclass LifecycleTalker(LifecycleNode):\n\n    def __init__(self):\n        super().__init__('lifecycle_talker')\n        # Initialize components in unconfigured state\n"})}),"\n",(0,s.jsx)(n.h2,{id:"25-security-and-real-time-considerations",children:"2.5 Security and Real-time Considerations"}),"\n",(0,s.jsx)(n.h3,{id:"security-features",children:"Security Features"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 includes security features that were lacking in ROS 1:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Authentication"}),": Verifying the identity of nodes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Encryption"}),": Protecting message contents"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Access control"}),": Controlling what nodes can communicate"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"real-time-capabilities",children:"Real-time Capabilities"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 is designed with real-time systems in mind:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time scheduling"}),": Support for SCHED_FIFO and SCHED_RR policies"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Memory management"}),": Techniques to avoid memory allocation during real-time execution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Message prioritization"}),": QoS policies for prioritizing critical messages"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"26-practical-example-robot-navigation-system",children:"2.6 Practical Example: Robot Navigation System"}),"\n",(0,s.jsx)(n.p,{children:"Let's put together a practical example that demonstrates multiple ROS 2 concepts: a simple navigation system that includes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sensor data (LIDAR) processing"}),"\n",(0,s.jsx)(n.li,{children:"Map representation"}),"\n",(0,s.jsx)(n.li,{children:"Path planning"}),"\n",(0,s.jsx)(n.li,{children:"Robot control"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import LaserScan\nfrom geometry_msgs.msg import Twist\nfrom nav_msgs.msg import OccupancyGrid\nimport numpy as np\n\nclass NavigationSystem(Node):\n\n    def __init__(self):\n        super().__init__('navigation_system')\n        \n        # Create subscribers\n        self.scan_sub = self.create_subscription(\n            LaserScan,\n            'scan',\n            self.scan_callback,\n            10)\n            \n        # Create publisher for velocity commands\n        self.cmd_vel_pub = self.create_publisher(\n            Twist, \n            'cmd_vel', \n            10)\n            \n        # Create timer for navigation logic\n        self.nav_timer = self.create_timer(0.1, self.navigation_callback)\n        \n        # Robot state\n        self.laser_data = None\n        self.obstacle_detected = False\n        \n        # Navigation parameters\n        self.declare_parameter('safety_distance', 0.5)\n        self.safety_distance = self.get_parameter('safety_distance').value\n\n    def scan_callback(self, msg):\n        \"\"\"Process LIDAR data to detect obstacles\"\"\"\n        # Convert to numpy array for processing\n        ranges = np.array(msg.ranges)\n        \n        # Remove invalid readings\n        valid_ranges = ranges[np.isfinite(ranges)]\n        \n        # Check for obstacles within safety distance\n        self.obstacle_detected = np.any(valid_ranges < self.safety_distance)\n        self.laser_data = valid_ranges\n\n    def navigation_callback(self):\n        \"\"\"Main navigation logic\"\"\"\n        msg = Twist()\n        \n        if self.laser_data is not None:\n            if self.obstacle_detected:\n                # Stop robot if obstacle detected\n                msg.linear.x = 0.0\n                msg.angular.z = 0.0\n                self.get_logger().info('Obstacle detected! Stopping robot.')\n            else:\n                # Move forward if no obstacles\n                msg.linear.x = 0.5  # Forward speed\n                msg.angular.z = 0.0  # No rotation\n        else:\n            # Stop if no sensor data\n            msg.linear.x = 0.0\n            msg.angular.z = 0.0\n            \n        self.cmd_vel_pub.publish(msg)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    nav_system = NavigationSystem()\n    \n    try:\n        rclpy.spin(nav_system)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        nav_system.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"27-summary",children:"2.7 Summary"}),"\n",(0,s.jsx)(n.p,{children:"This chapter has provided a comprehensive overview of ROS 2, the foundational communication framework for modern robotics. Key takeaways include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ROS 2's architecture is built on DDS, providing real-time capabilities and improved robustness"}),"\n",(0,s.jsx)(n.li,{children:"The publish-subscribe model with topics, request-response with services, and goal-oriented communication with actions enable flexible system design"}),"\n",(0,s.jsx)(n.li,{children:"The package system with colcon provides consistent development and deployment workflows"}),"\n",(0,s.jsx)(n.li,{children:"Advanced features like TF, time handling, and lifecycle management support complex robotics applications"}),"\n",(0,s.jsx)(n.li,{children:"Security and real-time considerations make ROS 2 suitable for production environments"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Understanding ROS 2 is crucial for Physical AI systems as it provides the communication infrastructure that enables different components to interact effectively. In subsequent chapters, we'll see how ROS 2 integrates with simulation environments, AI systems, and control frameworks."}),"\n",(0,s.jsx)(n.h2,{id:"28-exercises",children:"2.8 Exercises"}),"\n",(0,s.jsx)(n.h3,{id:"exercise-21-node-communication",children:"Exercise 2.1: Node Communication"}),"\n",(0,s.jsx)(n.p,{children:"Create two ROS 2 nodes: one that publishes sensor data (simulated) and another that subscribes to this data and logs the values. Implement appropriate error handling and logging."}),"\n",(0,s.jsx)(n.h3,{id:"exercise-22-service-implementation",children:"Exercise 2.2: Service Implementation"}),"\n",(0,s.jsx)(n.p,{children:"Implement a ROS 2 service that calculates the distance between two points in 2D space. Create both the service server and a client node that makes requests to the service."}),"\n",(0,s.jsx)(n.h3,{id:"exercise-23-qos-policy-experimentation",children:"Exercise 2.3: QoS Policy Experimentation"}),"\n",(0,s.jsx)(n.p,{children:"Modify the publisher-subscriber example to experiment with different QoS policies. Compare the effects of reliable vs. best-effort delivery and different history policies."}),"\n",(0,s.jsx)(n.h3,{id:"exercise-24-robot-control-node",children:"Exercise 2.4: Robot Control Node"}),"\n",(0,s.jsx)(n.p,{children:"Create a ROS 2 node that subscribes to a LIDAR topic and publishes velocity commands to avoid obstacles. Implement the control logic using a simple proportional controller."}),"\n",(0,s.jsx)(n.h3,{id:"exercise-25-launch-file-creation",children:"Exercise 2.5: Launch File Creation"}),"\n",(0,s.jsx)(n.p,{children:"Create a launch file that starts multiple nodes simultaneously: a sensor simulator, a processing node, and a visualization node. Use parameters to configure each node."})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var s=i(6540);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);